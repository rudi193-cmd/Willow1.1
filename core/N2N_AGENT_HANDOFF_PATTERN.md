<!-- Generated by: Cerebras (llm_router) -->
# N2N_AGENT_HANDOFF_PATTERN.md

## Purpose
The N2N (Node-to-Node) HANDOFF pattern is used by Willow agents to efficiently transfer state between agents, reducing the need for full conversation history. This approach enables seamless agent-to-agent handoffs with minimal state preservation.

## Base-17 Session IDs
* 5-char compact identifiers (e.g., 7KE2N)
* Used for session tracking across agent handoffs

## HANDOFF Packets
* `PacketType.HANDOFF` format:
	+ `what_happened`: summary of previous agent's work
	+ `what_next`: minimal state for next agent to process
* Max 4KB packet size ensures efficient handoff

## Pattern for Agent-to-Agent Handoff
1. Agent A creates session with Base-17 ID
2. Agent A processes and saves state
3. Agent A creates HANDOFF packet with `what_happened` and `what_next`
4. Agent B receives HANDOFF packet (approximately 200 bytes)
5. Agent B loads minimal state and continues work

## Example Handoff Flow
1. Willow starts analysis â†’ session 7KE2N
2. Willow hands off to Kart with HANDOFF packet
3. Kart loads compact state, continues work
4. Kart hands back to Willow with results

## Benefits
* Works with small context windows (4-8K tokens)
* $0.00 cost (free fleet compatible)
* Infinite agent chain possible
* No conversation accumulation

## Conclusion
The N2N HANDOFF pattern provides a lightweight and efficient solution for agent-to-agent communication, enabling seamless handoffs with minimal state transfer. By using compact Base-17 session IDs and HANDOFF packets, agents can work together while reducing costs and conversation history accumulation.